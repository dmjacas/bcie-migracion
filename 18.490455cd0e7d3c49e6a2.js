(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{V9b4:function(t,i,n){"use strict";n.r(i),n.d(i,"DocumentalModule",(function(){return A}));var c=n("ofXK"),e=n("o0su"),o=n("fXoL"),r=n("sYmb"),a=n("1kSV"),s=n("3Pt+"),b=n("vV3i"),l=n("AytR"),u=function(){function t(t){this.green=t,this.config={clickable:!0,maxFiles:1,autoReset:null,errorReset:null,cancelReset:null}}return t.prototype.ngOnInit=function(){this.type="directive",this.config.url=this.green.esComunidad?l.a.siteUrl+"server_doc.php?id="+this.id+"&com="+this.green.idComunidad:l.a.siteUrl+"/server_doc.php?id="+this.id+"&org="+this.green.orgSelected},t.prototype.toggleAutoReset=function(){this.config.autoReset=this.config.autoReset?null:5e3,this.config.errorReset=this.config.errorReset?null:5e3,this.config.cancelReset=this.config.cancelReset?null:5e3},t.prototype.resetDropzoneUploads=function(){this.componentRef&&this.componentRef.directiveRef&&this.componentRef.directiveRef.reset()},t.prototype.onUploadInit=function(t){},t.prototype.onUploadError=function(t){},t.prototype.onUploadSuccess=function(t){this.resetDropzoneUploads()},t.\u0275fac=function(i){return new(i||t)(o.Qb(e.e))},t.\u0275cmp=o.Kb({type:t,selectors:[["app-item-upload"]],viewQuery:function(t,i){var n;1&t&&o.Xc(b.b,!0),2&t&&o.Ac(n=o.jc())&&(i.componentRef=n.first)},inputs:{id:"id"},decls:4,vars:1,consts:[[1,"dropzone","dropzone-container",3,"dropzone","init","error","success"],[1,"dz-message"],[1,"btn","btn-sm","trasparent"],[1,"fa","fa-upload",2,"margin-top","9px"]],template:function(t,i){1&t&&(o.Wb(0,"div",0),o.ic("init",(function(t){return i.onUploadInit(t)}))("error",(function(t){return i.onUploadError(t)}))("success",(function(t){return i.onUploadSuccess(t)})),o.Wb(1,"div",1),o.Wb(2,"button",2),o.Rb(3,"i",3),o.Vb(),o.Vb(),o.Vb()),2&t&&o.sc("dropzone",i.config)},directives:[b.c],encapsulation:2}),t}(),d=n("jhN1"),f=n("IkSl");function p(t,i){1&t&&(o.Wb(0,"span"),o.Pc(1),o.nc(2,"translate"),o.Vb()),2&t&&(o.Cb(1),o.Qc(o.oc(2,1,"editar")))}function m(t,i){1&t&&(o.Wb(0,"span"),o.Pc(1),o.nc(2,"translate"),o.Vb()),2&t&&(o.Cb(1),o.Qc(o.oc(2,1,"guardar")))}function g(t,i){1&t&&(o.Wb(0,"span"),o.Pc(1),o.nc(2,"translate"),o.Vb()),2&t&&(o.Cb(1),o.Qc(o.oc(2,1,"cancelar")))}function v(t,i){1&t&&(o.Wb(0,"span"),o.Pc(1),o.nc(2,"translate"),o.Vb()),2&t&&(o.Cb(1),o.Qc(o.oc(2,1,"eliminar")))}function h(t,i){if(1&t&&(o.Wb(0,"div"),o.Pc(1),o.Vb()),2&t){var n=o.mc();o.Cb(1),o.Qc(n.documento.title)}}function V(t,i){if(1&t){var n=o.Xb();o.Wb(0,"input",21),o.ic("ngModelChange",(function(t){return o.Dc(n),o.mc().tempObj.title=t})),o.Vb()}if(2&t){var c=o.mc();o.sc("ngModel",c.tempObj.title)}}function W(t,i){if(1&t){var n=o.Xb();o.Wb(0,"i",22),o.ic("click",(function(){return o.Dc(n),o.mc().editarDocu()})),o.Vb()}}function C(t,i){if(1&t){var n=o.Xb();o.Wb(0,"button",23),o.ic("click",(function(){return o.Dc(n),o.mc().guardarData()})),o.Pc(1),o.nc(2,"translate"),o.Vb()}2&t&&(o.Cb(1),o.Qc(o.oc(2,1,"guardar")))}function y(t,i){if(1&t){var n=o.Xb();o.Wb(0,"i",24),o.ic("click",(function(){return o.Dc(n),o.mc().eliminarDocu()})),o.Vb()}}function I(t,i){if(1&t){var n=o.Xb();o.Wb(0,"button",25),o.ic("click",(function(){return o.Dc(n),o.mc().cancelar()})),o.Pc(1),o.nc(2,"translate"),o.Vb()}2&t&&(o.Cb(1),o.Rc("",o.oc(2,1,"cancelar")," "))}function k(t,i){if(1&t&&(o.Wb(0,"div",32),o.Rb(1,"pdf-viewer",33),o.Vb()),2&t){var n=o.mc(2);o.Cb(1),o.sc("src",n.imgsrc)("render-text",!0)}}function D(t,i){if(1&t&&(o.Wb(0,"div",32),o.Rb(1,"img",34),o.Vb()),2&t){var n=o.mc(2);o.Cb(1),o.sc("src",n.imgsrc,o.Gc)}}function x(t,i){if(1&t&&(o.Wb(0,"div",26),o.Wb(1,"h4",27),o.Pc(2),o.nc(3,"translate"),o.Vb(),o.Wb(4,"button",28),o.ic("click",(function(){return(0,i.dismiss)("Cross click")})),o.Wb(5,"span",29),o.Pc(6,"\xd7"),o.Vb(),o.Vb(),o.Vb(),o.Wb(7,"div",30),o.Wb(8,"div",1),o.Nc(9,k,2,2,"div",31),o.Nc(10,D,2,1,"div",31),o.Vb(),o.Vb()),2&t){var n=o.mc();o.Cb(2),o.Qc(o.oc(3,3,"verificable")),o.Cb(7),o.sc("ngIf",!n.tipoimg),o.Cb(1),o.sc("ngIf",n.tipoimg)}}var N=function(){function t(t,i,n,c,e){this.green=t,this.sanitizer=i,this.modalService=n,this.reg=c,this.translate=e,this.guardar=new o.o,this.delete=new o.o,this.translate.setDefaultLang(this.green.getlang)}return t.prototype.ngOnInit=function(){this.tempObj=JSON.parse(JSON.stringify(this.documento))},t.prototype.editarDocu=function(){this.editar=!0},t.prototype.eliminarDocu=function(){this.delete.emit(this.documento)},t.prototype.cancelar=function(){this.editar=!1,this.tempObj=null,this.tempObj=JSON.parse(JSON.stringify(this.documento))},t.prototype.guardarData=function(){this.documento=this.tempObj,this.editar=!1,this.guardar.emit(this.documento)},t.prototype.opneImg=function(t){var i=this;this.green.bloquear(),this.reg.urlVerificable({id:this.documento.id,documento:!0}).subscribe((function(n){"pdf"===n.data.tipo?(i.imgsrc=i.sanitizer.bypassSecurityTrustResourceUrl(""+l.a.siteUrl+n.data.url),i.tipoimg=!1,i.modalService.open(t,{windowClass:"dark-modal",size:"lg"})):"jpg"===n.data.tipo?(i.imgsrc=i.sanitizer.bypassSecurityTrustResourceUrl(""+l.a.siteUrl+n.data.url),i.tipoimg=!0,i.modalService.open(t,{windowClass:"dark-modal",size:"lg"})):i.green.error("No tiene verificable asociado."),i.green.desbloquear()}))},t.\u0275fac=function(i){return new(i||t)(o.Qb(e.e),o.Qb(d.b),o.Qb(a.e),o.Qb(e.h),o.Qb(r.d))},t.\u0275cmp=o.Kb({type:t,selectors:[["app-verdocumento"]],inputs:{documento:"documento"},outputs:{guardar:"guardar",delete:"delete"},decls:43,vars:16,consts:[[1,"card"],[1,"row"],[1,"col-12","g-grid"],[1,"table","table-bordered"],[2,"width","60%"],[4,"ngIf"],["type","text","class","form-control form-control-sm",3,"ngModel","ngModelChange",4,"ngIf"],[2,"text-align","center","vertical-align","middle"],["class","fa fa-pencil","style","cursor: pointer;font-size: 1.2em",3,"click",4,"ngIf"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],["class","fa fa-trash","style","cursor: pointer;font-size: 1.2em",3,"click",4,"ngIf"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[1,"col-3"],[1,"col-6"],[3,"id"],[1,"card-header",2,"margin-top","30px"],[1,"card-body"],[1,"col-4"],[1,"icon","icon-docs","text-success",3,"click"],[1,"col-md-6",2,"height","0px"],["content",""],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"fa","fa-pencil",2,"cursor","pointer","font-size","1.2em",3,"click"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-trash",2,"cursor","pointer","font-size","1.2em",3,"click"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"modal-header"],[1,"modal-title","text-white"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","col-12",4,"ngIf"],[1,"col-12"],[2,"display","block",3,"src","render-text"],["width","100%","height","100%",3,"src"]],template:function(t,i){if(1&t){var n=o.Xb();o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Wb(3,"table",3),o.Wb(4,"thead"),o.Wb(5,"tr"),o.Wb(6,"th",4),o.Pc(7),o.nc(8,"translate"),o.Vb(),o.Wb(9,"th"),o.Nc(10,p,3,3,"span",5),o.Nc(11,m,3,3,"span",5),o.Vb(),o.Wb(12,"th"),o.Nc(13,g,3,3,"span",5),o.Nc(14,v,3,3,"span",5),o.Vb(),o.Vb(),o.Vb(),o.Wb(15,"tbody"),o.Wb(16,"tr"),o.Wb(17,"td"),o.Nc(18,h,2,1,"div",5),o.Nc(19,V,1,1,"input",6),o.Vb(),o.Wb(20,"td",7),o.Nc(21,W,1,0,"i",8),o.Nc(22,C,3,3,"button",9),o.Vb(),o.Wb(23,"td",7),o.Nc(24,y,1,0,"i",10),o.Nc(25,I,3,3,"button",11),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(26,"div",1),o.Rb(27,"div",12),o.Wb(28,"div",13),o.Rb(29,"app-item-upload",14),o.Vb(),o.Vb(),o.Wb(30,"div",15),o.Pc(31),o.Vb(),o.Wb(32,"div",16),o.Wb(33,"div",1),o.Wb(34,"div",17),o.Wb(35,"i",18),o.ic("click",(function(){o.Dc(n);var t=o.Bc(42);return i.opneImg(t)})),o.Vb(),o.Vb(),o.Wb(36,"div",13),o.Pc(37),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(38,"div",19),o.Wb(39,"div",0),o.Wb(40,"div",16),o.Nc(41,x,11,5,"ng-template",null,20,o.Oc),o.Vb(),o.Vb(),o.Vb()}2&t&&(o.Cb(7),o.Qc(o.oc(8,14,"nombre")),o.Cb(3),o.sc("ngIf",!i.editar),o.Cb(1),o.sc("ngIf",i.editar),o.Cb(2),o.sc("ngIf",i.editar),o.Cb(1),o.sc("ngIf",!i.editar),o.Cb(4),o.sc("ngIf",!i.editar),o.Cb(1),o.sc("ngIf",i.editar),o.Cb(2),o.sc("ngIf",!i.editar),o.Cb(1),o.sc("ngIf",i.editar),o.Cb(2),o.sc("ngIf",!i.editar),o.Cb(1),o.sc("ngIf",i.editar),o.Cb(4),o.sc("id",i.documento.id),o.Cb(2),o.Rc(" ",i.documento.title," "),o.Cb(6),o.Rc(" ",i.documento.fecha," "))},directives:[c.m,u,s.d,s.o,s.r,f.a],pipes:[r.c],encapsulation:2}),t}();function R(t,i){if(1&t){var n=o.Xb();o.Wb(0,"div",12),o.Wb(1,"i",13),o.ic("click",(function(){return o.Dc(n),o.mc(2).nuevodoc()})),o.nc(2,"translate"),o.Vb(),o.Vb()}2&t&&(o.Cb(1),o.tc("ngbTooltip",o.oc(2,1,"nuevo_documento")))}function O(t,i){if(1&t&&(o.Wb(0,"span"),o.Pc(1),o.Vb()),2&t){var n=o.mc().$implicit;o.Cb(1),o.Rc(" ",n.title,"")}}function z(t,i){if(1&t){var n=o.Xb();o.Wb(0,"input",23),o.ic("ngModelChange",(function(t){return o.Dc(n),o.mc().$implicit.title=t})),o.Vb()}if(2&t){var c=o.mc().$implicit;o.sc("ngModel",c.title)}}function P(t,i){if(1&t){var n=o.Xb();o.Wb(0,"i",24),o.ic("click",(function(){o.Dc(n);var t=o.mc().$implicit;return o.mc(2).editar(t)})),o.nc(1,"translate"),o.Vb()}2&t&&o.tc("ngbTooltip",o.oc(1,1,"nuevo_documento"))}function w(t,i){if(1&t){var n=o.Xb();o.Wb(0,"i",25),o.ic("click",(function(){o.Dc(n);var t=o.mc().$implicit;return o.mc(2).editdoc(t)}))("click",(function(){return o.Dc(n),o.mc(3).nuevodoc()})),o.nc(1,"translate"),o.Vb()}2&t&&o.tc("ngbTooltip",o.oc(1,1,"nuevo_documento"))}function M(t,i){if(1&t){var n=o.Xb();o.Wb(0,"span",29),o.ic("click",(function(){o.Dc(n);var t=o.mc().$implicit;return o.mc(3).verdocumento(t)})),o.Pc(1),o.Vb()}if(2&t){var c=o.mc().$implicit;o.Cb(1),o.Rc(" ",c.title,"")}}function Q(t,i){if(1&t){var n=o.Xb();o.Wb(0,"input",23),o.ic("ngModelChange",(function(t){return o.Dc(n),o.mc().$implicit.title=t})),o.Vb()}if(2&t){var c=o.mc().$implicit;o.sc("ngModel",c.title)}}function X(t,i){if(1&t&&(o.Wb(0,"div",30),o.Rb(1,"app-item-upload",31),o.Vb()),2&t){var n=o.mc(2).$implicit;o.Cb(1),o.sc("id",n.id)}}function S(t,i){if(1&t){var n=o.Xb();o.Wb(0,"div",30),o.Wb(1,"button",32),o.ic("click",(function(){o.Dc(n);var t=o.mc().$implicit;return o.mc(3).guardar(t,!1)})),o.Pc(2),o.nc(3,"translate"),o.Vb(),o.Vb()}2&t&&(o.Cb(2),o.Qc(o.oc(3,1,"guardar")))}function $(t,i){if(1&t&&(o.Wb(0,"li"),o.Wb(1,"div",1),o.Wb(2,"div",26),o.Rb(3,"i",15),o.Nc(4,M,2,1,"span",27),o.Wb(5,"div",17),o.Nc(6,Q,1,1,"input",18),o.Vb(),o.Vb(),o.Nc(7,X,2,1,"div",28),o.Nc(8,S,4,3,"div",28),o.Vb(),o.Vb()),2&t){var n=i.$implicit;o.Cb(4),o.sc("ngIf",0!=n.id),o.Cb(2),o.sc("ngIf",0==n.id),o.Cb(1),o.sc("ngIf",0!=n.id),o.Cb(1),o.sc("ngIf",0==n.id)}}function _(t,i){if(1&t){var n=o.Xb();o.Wb(0,"li"),o.Wb(1,"div",1),o.Wb(2,"div",14),o.Rb(3,"i",15),o.Nc(4,O,2,1,"span",16),o.Wb(5,"div",17),o.Nc(6,z,1,1,"input",18),o.Vb(),o.Vb(),o.Wb(7,"div",12),o.Nc(8,P,2,3,"i",19),o.Nc(9,w,2,3,"i",20),o.Vb(),o.Wb(10,"div",12),o.Wb(11,"i",21),o.ic("click",(function(){o.Dc(n);var t=i.$implicit;return o.mc(2).addSubtitem(t)})),o.nc(12,"translate"),o.Vb(),o.Vb(),o.Vb(),o.Wb(13,"ul",22),o.Nc(14,$,9,4,"li",5),o.Vb(),o.Vb()}if(2&t){var c=i.$implicit;o.Cb(4),o.sc("ngIf",!c.edit),o.Cb(2),o.sc("ngIf",c.edit),o.Cb(2),o.sc("ngIf",!c.edit),o.Cb(1),o.sc("ngIf",c.edit),o.Cb(2),o.tc("ngbTooltip",o.oc(12,6,"nuevo_documento")),o.Cb(3),o.sc("ngForOf",c.items)}}function U(t,i){if(1&t&&(o.Wb(0,"li"),o.Wb(1,"a"),o.Wb(2,"div",1),o.Wb(3,"div",7),o.Rb(4,"span",8),o.Wb(5,"span",9),o.Pc(6),o.Vb(),o.Vb(),o.Nc(7,R,3,3,"div",10),o.Vb(),o.Vb(),o.Wb(8,"ul",11),o.Nc(9,_,15,8,"li",5),o.Vb(),o.Vb()),2&t){var n=i.$implicit,c=o.mc();o.Cb(6),o.Rc(" ",n.title," "),o.Cb(1),o.sc("ngIf",3==c.tipoDoc),o.Cb(2),o.sc("ngForOf",n.items)}}function q(t,i){if(1&t){var n=o.Xb();o.Wb(0,"div",33),o.Wb(1,"app-verdocumento",34),o.ic("guardar",(function(t){return o.Dc(n),o.mc().guardarDoc(t)}))("delete",(function(t){return o.Dc(n),o.mc().eliminarDoc(t)})),o.Vb(),o.Vb()}if(2&t){var c=o.mc();o.Cb(1),o.sc("documento",c.documento)}}var T=[{path:"",children:[{path:"doc",component:function(){function t(t,i,n){this.core=t,this.green=i,this.translate=n,this.translate.setDefaultLang(this.green.getlang)}return t.prototype.ngOnInit=function(){var t=this;this.green.bloquear(),this.tipoDoc=this.green.getDocumento,this.core.getDocumentos({tipo:this.tipoDoc}).subscribe((function(i){try{t.datos=i.data,t.green.desbloquear()}catch(n){t.green.desbloquear()}}))},t.prototype.verdocumento=function(t){this.documento=t},t.prototype.nuevodoc=function(){var t=this;this.green.bloquear(),this.core.nuevoDoc().subscribe((function(i){t.green.desbloquear(),t.ngOnInit()}))},t.prototype.addSubtitem=function(t){void 0===t.items&&(t.items=[]),t.items.push({id:0,title:"Nuevo documento",doc:1,nuevo1:1,padre:t.id,idOrganizacion:this.green.orgSelected,idComunidad:this.green.idComunidad})},t.prototype.editar=function(t){t.edit=!0},t.prototype.editdoc=function(t){var i=this;this.green.bloquear(),this.core.editDocu(t).subscribe((function(t){i.green.desbloquear(),i.ngOnInit()}))},t.prototype.guardarDoc=function(t){this.guardar(t,!1)},t.prototype.eliminarDoc=function(t){var i=this;this.core.deleteDoc(t).subscribe((function(t){i.ngOnInit(),i.documento=null}))},t.prototype.guardar=function(t,i){var n=this;""!==t.title&&(this.green.bloquear(),this.core.guardarDoc(t).subscribe((function(t){n.green.desbloquear(),n.ngOnInit()})))},t.\u0275fac=function(i){return new(i||t)(o.Qb(e.b),o.Qb(e.e),o.Qb(r.d))},t.\u0275cmp=o.Kb({type:t,selectors:[["app-arboldoc"]],decls:7,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-7"],[1,"sidebar-nav"],[1,"arbol-fuentes"],[4,"ngFor","ngForOf"],["class","col-5",4,"ngIf"],[1,"col-11"],[1,"icon","icon-doc","text-success"],[1,"text-success"],["class","col-1",4,"ngIf"],[1,"sub-item"],[1,"col-1"],["placement","top",1,"fa","fa-2x","fa-plus","text-success",2,"cursor","pointer","margin-left","20px","font-size","1.5em",3,"ngbTooltip","click"],[1,"col-9"],[1,"fa","fa-chevron-right"],[4,"ngIf"],[1,"col-10",2,"margin-left","20px","margin-top","-20px"],["class","form-control form-control-sm",3,"ngModel","ngModelChange",4,"ngIf"],["class","fa fa-2x fa-pencil","placement","top","style","cursor: pointer;font-size: 1.4em",3,"ngbTooltip","click",4,"ngIf"],["class","fa fa-2x fa-save","placement","top","style","cursor: pointer;font-size: 1.4em",3,"ngbTooltip","click",4,"ngIf"],["placement","top",1,"fa","fa-2x","fa-plus","text-success",2,"cursor","pointer","font-size","1.5em",3,"ngbTooltip","click"],[1,"item"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["placement","top",1,"fa","fa-2x","fa-pencil",2,"cursor","pointer","font-size","1.4em",3,"ngbTooltip","click"],["placement","top",1,"fa","fa-2x","fa-save",2,"cursor","pointer","font-size","1.4em",3,"ngbTooltip","click"],[1,"col-6"],["class","text-success",3,"click",4,"ngIf"],["class","col-4",4,"ngIf"],[1,"text-success",3,"click"],[1,"col-4"],[3,"id"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"col-5"],[3,"documento","guardar","delete"]],template:function(t,i){1&t&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Wb(3,"nav",3),o.Wb(4,"ul",4),o.Nc(5,U,10,3,"li",5),o.Vb(),o.Vb(),o.Vb(),o.Nc(6,q,2,1,"div",6),o.Vb(),o.Vb()),2&t&&(o.Cb(5),o.sc("ngForOf",i.datos),o.Cb(1),o.sc("ngIf",i.documento))},directives:[c.l,c.m,a.n,s.d,s.o,s.r,u,N],pipes:[r.c],styles:[".sidebar-nav[_ngcontent-%COMP%]   .sub-item[_ngcontent-%COMP%]{font-size:12px;margin-left:10px}.sidebar-nav[_ngcontent-%COMP%]   .sub-item[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:15px;font-size:12px;cursor:pointer}.sidebar-nav[_ngcontent-%COMP%]   .sub-item[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:15px}"]}),t}(),data:{title:"Gesti\xf3n documental",reg:!0,path:"/documento/doc"}}]}],j=n("tyNb"),F=n("mqiu"),J=n("tk/3"),K={maxFilesize:50,acceptedFiles:"image/*,application/pdf,.xls,.xlsx,.doc,.docx"},A=function(){function t(){}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(i){return new(i||t)},providers:[{provide:b.a,useValue:K}],imports:[[c.b,a.f,b.d,j.g.forChild(T),s.j,f.b,r.b.forRoot({loader:{provide:r.a,useFactory:function(t){return new F.a(t)},deps:[J.b]}})]]}),t}()}}]);